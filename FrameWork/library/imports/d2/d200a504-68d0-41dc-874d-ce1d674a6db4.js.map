{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\scripts\\core/assets\\scripts\\core\\UserDataMgr.js"],"names":["UserDataMgr","cc","Class","extends","Component","properties","playTimes","Integer","playerName","initData","Mgr","StorageData","sys","localStorage","getItem","userdata","setItem","JSON","stringify","Data","parse","SaveUserData","module","exports"],"mappings":";;;;;;AAAA;AACA;AACA,IAAIA,cAAcC,GAAGC,KAAH,CAAS;AACvBC,UAASF,GAAGG,SADW;;AAGvBC,aAAW;AACVC,aAAUL,GAAGM,OADH,EACW;AACxBC,cAAW;AAFE,EAHY;;AAQ1BC,WAAS,oBAAY;AACpBR,KAAGS,GAAH,CAAOD,QAAP,GAAkB,KAAlB;;AAEA;AACA,MAAIE,cAAcV,GAAGW,GAAH,CAAOC,YAAP,CAAoBC,OAApB,CAA4B,eAA5B,CAAlB,CAJoB,CAI4C;AAChE,MAAGH,eAAe,IAAf,IAAuBA,eAAe,EAAzC,EACA;AACC;AACA,OAAII,WAAW,EAAf;AACAA,YAASP,UAAT,GAAsB,EAAtB;AACAO,YAAST,SAAT,GAAqB,CAArB;AACA,QAAKE,UAAL,GAAkB,EAAlB;AACA,QAAKF,SAAL,GAAiB,CAAjB;AACAL,MAAGW,GAAH,CAAOC,YAAP,CAAoBG,OAApB,CAA4B,eAA5B,EAA4CC,KAAKC,SAAL,CAAeH,QAAf,CAA5C;AACA,GATD,MAWA;AACC;AACA,OAAII,OAAOF,KAAKG,KAAL,CAAWT,WAAX,CAAX;AACA,QAAKH,UAAL,GAAkBW,KAAKX,UAAvB;AACA,QAAKF,SAAL,GAAiBa,KAAKb,SAAtB;AACA;;AAEDL,KAAGS,GAAH,CAAOD,QAAP,GAAkB,IAAlB;AACA,EAhCyB;;AAkC1B;AACAY,eAAa,wBAAU;AACtB,MAAIN,WAAW,EAAf;AACAA,WAASP,UAAT,GAAsB,KAAKA,UAA3B;AACAO,WAAST,SAAT,GAAqB,KAAKA,SAA1B;AACAL,KAAGW,GAAH,CAAOC,YAAP,CAAoBG,OAApB,CAA4B,eAA5B,EAA4CC,KAAKC,SAAL,CAAeH,QAAf,CAA5C;AACA;;AAED;;AA1C0B,CAAT,CAAlB;;AA8CAO,OAAOC,OAAP,GAAiBvB,WAAjB","file":"UserDataMgr.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\core","sourcesContent":["//游戏数据操作类\r\n//数据操作结构\r\nvar UserDataMgr = cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties:{\r\n    \tplayTimes:cc.Integer,//游戏次数\r\n\t\tplayerName:\"Alex\",\r\n\t},\r\n\r\n\tinitData:function () {\r\n\t\tcc.Mgr.initData = false;\r\n\r\n\t\t//本地存储数据\r\n\t\tvar StorageData = cc.sys.localStorage.getItem('game_userdata'); //作为一个整体保存起来\r\n\t\tif(StorageData == null || StorageData == \"\")\r\n\t\t{\r\n\t\t\t//cc.log(\"还没有保存过持久数据\");\r\n\t\t\tvar userdata = {};\r\n\t\t\tuserdata.playerName = \"\";\r\n\t\t\tuserdata.playTimes = 0;\r\n\t\t\tthis.playerName = \"\";\r\n\t\t\tthis.playTimes = 0;\r\n\t\t\tcc.sys.localStorage.setItem('game_userdata',JSON.stringify(userdata));\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\t//cc.log(\"有之前保存的持久数据存在\");\r\n\t\t\tvar Data = JSON.parse(StorageData);\r\n\t\t\tthis.playerName = Data.playerName;\r\n\t\t\tthis.playTimes = Data.playTimes;\r\n\t\t}\r\n\r\n\t\tcc.Mgr.initData = true;\r\n\t},\r\n\r\n\t//保存本地数据\r\n\tSaveUserData:function(){\r\n\t\tvar userdata = {};\r\n\t\tuserdata.playerName = this.playerName;\r\n\t\tuserdata.playTimes = this.playTimes;\r\n\t\tcc.sys.localStorage.setItem('game_userdata',JSON.stringify(userdata));\r\n\t},\r\n\r\n\t//其他操作方法\r\n\r\n});\r\n\r\nmodule.exports = UserDataMgr\r\n"]}