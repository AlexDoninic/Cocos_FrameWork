{"version":3,"sources":["GoodMapDecoder.js"],"names":["GoodsData","require","GoodMapDecoder","cc","Class","extends","Component","properties","jsonName","goodsList","default","type","DecodeJson","event","self","reCb","loader","loadRes","error","obj","jsonRoot","json","goods","i","length","goodsData","Id","goodsId","icon","name","price","log","getDataByName","data","getDataById","itemId","getJsonLength","getDataList","module","exports"],"mappings":";;;;;;AAAA,IAAIA,YAAYC,QAAQ,WAAR,CAAhB;AACA,IAAIC,iBAAiBC,GAAGC,KAAH,CAAS;AAC1BC,aAASF,GAAGG,SADc;;AAG1BC,gBAAY;AACRC,kBAAS,OADD;AAERC,mBAAU;AACNC,qBAAQ,EADF;AAENC,kBAAK,CAACX,SAAD;AAFC;AAFF,KAHc;;AAW1B;AACAY,gBAAW,oBAAUC,KAAV,EAAiB;AACxB;AACA,YAAIC,OAAO,IAAX;AACAA,aAAKC,IAAL,GAAYF,KAAZ;AACAV,WAAGa,MAAH,CAAUC,OAAV,CAAkB,UAAQH,KAAKN,QAA/B,EAAyC,UAAUU,KAAV,EAAiBC,GAAjB,EAAsB;AAC3D,gBAAGD,KAAH,EACA;AACIJ,qBAAKC,IAAL,CAAU,KAAV;AACA;AACH;;AAED,gBAAIK,WAAWD,IAAIE,IAAJ,CAASC,KAAxB;AACA,iBAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAIH,SAASI,MAA7B,EAAqCD,GAArC,EAA0C;AACtC,oBAAIE,YAAY,IAAIzB,SAAJ,EAAhB;AACAyB,0BAAUC,EAAV,GAAeN,SAASG,CAAT,EAAYI,OAA3B;AACAF,0BAAUG,IAAV,GAAiBR,SAASG,CAAT,EAAYK,IAA7B;AACAH,0BAAUI,IAAV,GAAiBT,SAASG,CAAT,EAAYM,IAA7B;AACAJ,0BAAUK,KAAV,GAAkBV,SAASG,CAAT,EAAYO,KAA9B;AACAhB,qBAAKL,SAAL,CAAec,CAAf,IAAoBE,SAApB;AACH;AACDtB,eAAG4B,GAAH,CAAO,MAAP;AACAjB,iBAAKC,IAAL,CAAU,IAAV;AACH,SAlBD;AAmBH,KAnCyB;;AAqC1B;AACAiB,mBAAc,uBAAUH,IAAV,EAAgB;AAC1B,YAAII,OAAO,IAAX;AACA,aAAK,IAAIV,IAAI,KAAKd,SAAL,CAAee,MAAf,GAAwB,CAArC,EAAwCD,KAAK,CAA7C,EAAgDA,GAAhD,EAAqD;AACjD,gBAAGM,QAAQ,KAAKpB,SAAL,CAAec,CAAf,EAAkBM,IAA7B,EACA;AACII,uBAAO,KAAKxB,SAAL,CAAec,CAAf,CAAP;AACA;AACH;AACJ;AACD,eAAOU,IAAP;AACH,KAhDyB;;AAkD1B;AACAC,iBAAY,qBAASC,MAAT,EAAgB;AACxB,YAAIF,OAAO,IAAX;AACA,aAAK,IAAIV,IAAI,KAAKd,SAAL,CAAee,MAAf,GAAwB,CAArC,EAAwCD,KAAK,CAA7C,EAAgDA,GAAhD,EAAqD;AACjD,gBAAGY,UAAU,KAAK1B,SAAL,CAAec,CAAf,EAAkBG,EAA/B,EACA;AACIO,uBAAO,KAAKxB,SAAL,CAAec,CAAf,CAAP;AACA;AACH;AACJ;AACD,eAAOU,IAAP;AACH,KA7DyB;;AA+D1BG,mBAAc,yBAAU;AACpB,eAAO,KAAK3B,SAAL,CAAee,MAAtB;AACH,KAjEyB;;AAmE1Ba,iBAAY,uBAAU;AAClB,eAAO,KAAK5B,SAAZ;AACH;AArEyB,CAAT,CAArB;AAuEA6B,OAAOC,OAAP,GAAiBrC,cAAjB","file":"GoodMapDecoder.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\scripts\\core\\DataMap\\Goods","sourcesContent":["var GoodsData = require(\"GoodsData\");\r\nvar GoodMapDecoder = cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        jsonName:\"goods\",\r\n        goodsList:{\r\n            default:[],\r\n            type:[GoodsData],\r\n        },\r\n    },\r\n\r\n    //解析数据\r\n    DecodeJson:function (event) {\r\n        //cc.log(\"===解析物品数据===\");\r\n        var self = this;\r\n        self.reCb = event;\r\n        cc.loader.loadRes(\"json/\"+self.jsonName, function (error, obj) {\r\n            if(error)\r\n            {\r\n                self.reCb(false);\r\n                return;\r\n            }\r\n            \r\n            var jsonRoot = obj.json.goods;\r\n            for (var i = 0; i < jsonRoot.length; i++) {\r\n                var goodsData = new GoodsData();\r\n                goodsData.Id = jsonRoot[i].goodsId;\r\n                goodsData.icon = jsonRoot[i].icon;\r\n                goodsData.name = jsonRoot[i].name;\r\n                goodsData.price = jsonRoot[i].price;\r\n                self.goodsList[i] = goodsData; \r\n            }\r\n            cc.log(\"解析完成\");\r\n            self.reCb(true);\r\n        });\r\n    },\r\n\r\n    //通过名字拿到当前的数据 不建议用，你要用我也没办法\r\n    getDataByName:function (name) {\r\n        var data = null;\r\n        for (var i = this.goodsList.length - 1; i >= 0; i--) {\r\n            if(name == this.goodsList[i].name)\r\n            {\r\n                data = this.goodsList[i];\r\n                break;\r\n            }\r\n        }\r\n        return data;\r\n    },\r\n\r\n    //通过itemid获取数据\r\n    getDataById:function(itemId){\r\n        var data = null;\r\n        for (var i = this.goodsList.length - 1; i >= 0; i--) {\r\n            if(itemId == this.goodsList[i].Id)\r\n            {\r\n                data = this.goodsList[i];\r\n                break;\r\n            }\r\n        }\r\n        return data;\r\n    },\r\n\r\n    getJsonLength:function(){\r\n        return this.goodsList.length\r\n    },\r\n\r\n    getDataList:function(){\r\n        return this.goodsList;\r\n    },\r\n});\r\nmodule.exports = GoodMapDecoder;\r\n"]}