{"version":3,"sources":["GlobalEvent.js"],"names":["cc","director","GlobalEvent","handles_","emit","eventName","data","returns","findEvenName","i","length","returnValue","push","on","callback","target","bind","off","clear"],"mappings":";;;;;;AAAA;AACA;AACAA,GAAGC,QAAH,CAAYC,WAAZ,GAA0B;AACtBC,cAAU,EADY;AAEtB;AACAC,UAAM,cAAUC,SAAV,EAAqBC,IAArB,EAA2B;AAC7B,YAAIC,UAAU,EAAd,CAD6B,CACZ;AACjB;AACAD,aAAKD,SAAL,GAAiBA,SAAjB,CAH6B,CAGH;;AAE1B,aAAM,IAAIG,YAAV,IAA0B,KAAKL,QAA/B,EAAyC;AACrC,gBAAIK,gBAAgBH,SAApB,EAA+B;AAC3B,qBAAK,IAAII,IAAI,CAAb,EAAgBA,IAAI,KAAKN,QAAL,CAAcK,YAAd,EAA4BE,MAAhD,EAAwDD,GAAxD,EAA6D;AACzD,wBAAI,KAAKN,QAAL,CAAcK,YAAd,EAA4BC,CAA5B,CAAJ,EACA;AACI,4BAAIE,cAAc,KAAKR,QAAL,CAAcK,YAAd,EAA4BC,CAA5B,EAA+BH,IAA/B,CAAlB;AACAC,gCAAQK,IAAR,CAAaD,WAAb;AACH;AACJ;AACJ;AACJ;AACD,eAAOJ,OAAP;AACH,KApBqB;AAqBtB;AACAM,QAAI,YAAUR,SAAV,EAAqBS,QAArB,EAA+BC,MAA/B,EAAuC;AACvC;AACA,aAAKZ,QAAL,CAAcE,SAAd,IAA2B,KAAKF,QAAL,CAAcE,SAAd,KAA4B,EAAvD;;AAEA,aAAKF,QAAL,CAAcE,SAAd,EAAyBO,IAAzB,CAA8BE,SAASE,IAAT,CAAcD,MAAd,CAA9B;AACH,KA3BqB;AA4BtB;AACAE,SAAK,aAAUZ,SAAV,EAAqB;AACtB,YAAI,CAAC,KAAKF,QAAL,CAAcE,SAAd,CAAL,EACI;;AAEJ,aAAK,IAAII,IAAI,CAAb,EAAgBA,IAAI,KAAKN,QAAL,CAAcE,SAAd,EAAyBK,MAA7C,EAAqDD,GAArD,EAA0D;AACtD,iBAAKN,QAAL,CAAcE,SAAd,EAAyBI,CAAzB,IAA8B,IAA9B;AACH;AACJ,KApCqB;;AAsCtB;AACAS,WAAO,iBAAU;AACb,aAAM,IAAIV,YAAV,IAA0B,KAAKL,QAA/B,EAAyC;AACrC,iBAAK,IAAIM,IAAI,CAAb,EAAgBA,IAAI,KAAKN,QAAL,CAAcK,YAAd,EAA4BE,MAAhD,EAAwDD,GAAxD,EAA6D;AACzD,qBAAKN,QAAL,CAAcK,YAAd,EAA4BC,CAA5B,IAAiC,IAAjC;AACH;AACJ;AACJ;AA7CqB,CAA1B","file":"GlobalEvent.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\core","sourcesContent":["//全局事件处理  分发和监听   相当于一个全局观察者\r\n//这个事件分发处理机制 没有针对每个绑定个体的\r\ncc.director.GlobalEvent = {\r\n    handles_: {},\r\n    //发送事件 事件分发\r\n    emit: function (eventName, data) {\r\n        var returns = [] //返回值\r\n        //console.log('事件分发', eventName);\r\n        data.eventName = eventName//保存一下事件名字\r\n\r\n        for ( var findEvenName in this.handles_ ){\r\n            if (findEvenName == eventName) {\r\n                for (var i = 0; i < this.handles_[findEvenName].length; i++) {\r\n                    if (this.handles_[findEvenName][i])\r\n                    {\r\n                        var returnValue = this.handles_[findEvenName][i](data)\r\n                        returns.push(returnValue)\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return returns\r\n    },\r\n    //添加普通事件  监听\r\n    on: function (eventName, callback, target) {\r\n        //console.log('完成事件注册监听', eventName);\r\n        this.handles_[eventName] = this.handles_[eventName] || []\r\n        \r\n        this.handles_[eventName].push(callback.bind(target))\r\n    },\r\n    //通过事件名和target移除一种事件监听\r\n    off: function (eventName) {\r\n        if (!this.handles_[eventName])\r\n            return;\r\n\r\n        for (var i = 0; i < this.handles_[eventName].length; i++) {\r\n            this.handles_[eventName][i] = null\r\n        }\r\n    },\r\n\r\n    //一次性清空所有数据\r\n    clear: function(){\r\n        for ( var findEvenName in this.handles_ ){\r\n            for (var i = 0; i < this.handles_[findEvenName].length; i++) {\r\n                this.handles_[findEvenName][i] = null;\r\n            }\r\n        }\r\n    },\r\n}\r\n\r\n\r\n"]}