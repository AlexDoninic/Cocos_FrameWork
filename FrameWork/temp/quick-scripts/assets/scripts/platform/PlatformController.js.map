{"version":3,"sources":["PlatformController.js"],"names":["PlatformController","cc","Class","statics","platform","Init","window","wx","tt","swan","IsLoginSync","result","isLoginSync","isLogin","console","log","Login","self","login","success","fail","showModal","title","content","cancelText","res","confirm","cancel","exit","CreateGameClub","winSize","view","getVisibleSize","leftRatio","width","topRatio","height","sysInfo","getSystemInfoSync","leftPos","windowWidth","topPos","windowHeight","gameClubBtn","createGameClubButton","icon","text","style","left","top","ShowClubButton","flag","show","hide","CreateFeedBackButton","lPos","tPos","loader","loadRes","err","texture","feedBackBtn","createFeedbackButton","type","image","ShowFeedbackBtn","OpenServiceConversation","openCustomerServiceConversation","sessionFrom","showMessageCard","ShareTopNav","index","Math","floor","random","info","Mgr","ShareInfos","getShareInfos","showShareMenu","withShareTicket","onShareAppMessage","imageUrl","url","ShareToFriendTxt","str","shareAppMessage","ShareToFriend","showToast","duration","socre","kvData","wxgame","score","update_time","Date","getTime","JSON","stringify","kvDataList","Array","push","key","value","setUserCloudStorage","KVDataList","complete","param","director","GlobalEvent","emit","Event","ShowRank","code","curScore","msg","getOpenDataContext","postMessage","message","CompareSdkVesrion","SDKVersion","sdkV","needV","out1","split","out2","i","length","parseInt","videoPath","recorderManager","getGameRecorderManager","onStart","onStop","ShareRecordScreen","onPause","onResume","onError","errMsg","start","getVideoRecorderManager","microphoneEnabled","stop","shareVideo","e","appId","navigateToMiniProgram","envVersion","appKey","long","vibrateLong","vibrateShort","module","exports"],"mappings":"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","file":"PlatformController.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\platform","sourcesContent":["\r\nvar PlatformController = cc.Class({\r\n    statics:{\r\n        //微信 wx\r\n        //头条 tt\r\n        //百度 baidu\r\n        platform:\"wx\",\r\n\r\n        Init:function () {\r\n        \tif(!window.wx && !window.tt && !window.swan)\r\n            \tthis.platform=\"pc\";\r\n        },\r\n\r\n        //百度 头条等先判定是否登陆了\r\n        IsLoginSync:function(){\r\n        \tif(this.platform == \"baidu\")\r\n        \t{\r\n        \t\tvar result = swan.isLoginSync();\r\n    \t\t\tif(result.isLogin)\r\n    \t\t\t{\r\n    \t\t\t\tconsole.log(\"已经有登陆了\");\r\n    \t\t\t\treturn true;\r\n    \t\t\t}\r\n    \t\t\treturn false;\r\n        \t}\r\n        \telse if(this.platform == \"tt\")\r\n        \t{\r\n\r\n        \t}\r\n        \treturn true;\r\n        },\r\n\r\n        Login:function(){\r\n        \tvar self = this;\r\n        \tif(this.platform == \"baidu\")\r\n        \t{\r\n        \t\tswan.login({\r\n\t\t\t        success: function () {\r\n\t\t\t            //登陆成功后执行某个操作\r\n\t\t\t        },\r\n\t\t\t        fail: function () {\r\n\t\t\t            swan.showModal({\r\n\t\t\t                title: \"登录失败\",\r\n\t\t\t                content: \"是否重新登录？\",\r\n\t\t\t                cancelText: \"退出游戏\",\r\n\t\t\t                success: function (res) {\r\n\t\t\t                    if (res.confirm) {\r\n\t\t\t                        console.log(\"点击了确定\");\r\n\t\t\t                        self.Login();\r\n\t\t\t                    }\r\n\t\t\t                    else if (res.cancel) {\r\n\t\t\t                        console.log(\"点击了取消\");\r\n\t\t\t                        swan.exit();\r\n\t\t\t                    }\r\n\t\t\t                }\r\n\t\t\t            });\r\n\t\t\t        }\r\n\t\t\t    })\r\n        \t}\r\n        \telse if(this.platform == \"tt\")\r\n        \t{\r\n        \t\ttt.login({\r\n\t\t\t\t    success (res) {\r\n\t\t\t\t        \r\n\t\t\t\t    },\r\n\t\t\t\t    fail (res) {\r\n\t\t\t\t        tt.showModal({\r\n\t\t\t                title: \"登录失败\",\r\n\t\t\t                content: \"是否重新登录？\",\r\n\t\t\t                cancelText: \"退出游戏\",\r\n\t\t\t                success: function (res) {\r\n\t\t\t                    if (res.confirm) {\r\n\t\t\t                        console.log(\"点击了确定\");\r\n\t\t\t                        self.Login();\r\n\t\t\t                    }\r\n\t\t\t                    else if (res.cancel) {\r\n\t\t\t                        console.log(\"点击了取消\");\r\n\t\t\t                        tt.exit();\r\n\t\t\t                    }\r\n\t\t\t                }\r\n\t\t\t            });\r\n\t\t\t\t    }\r\n\t\t\t\t});\r\n        \t}\r\n        \treturn true;\r\n        },\r\n\r\n        //游戏圈按钮\r\n        CreateGameClub:function(){\r\n        \tif(this.platform == \"wx\")\r\n        \t{\r\n        \t\tvar winSize = cc.view.getVisibleSize();\r\n        \t\tvar leftRatio = 68 / winSize.width;\r\n        \t\tvar topRatio = 275 / winSize.height;\r\n\r\n        \t\tvar sysInfo = wx.getSystemInfoSync();\r\n\r\n        \t\tthis.leftPos = sysInfo.windowWidth * leftRatio;\r\n        \t\tthis.topPos = sysInfo.windowHeight * topRatio;\r\n\r\n        \t\tvar self = this;\r\n        \t\tthis.gameClubBtn = wx.createGameClubButton({\r\n        \t\t\ticon:'green',\r\n        \t\t\ttext:\"游戏圈\",\r\n        \t\t\tstyle:{\r\n        \t\t\t\tleft:self.leftPos - 20,\r\n        \t\t\t\ttop:self.topPos - 20,\r\n        \t\t\t\twidth: 45,\r\n        \t\t\t\theight: 45,\r\n        \t\t\t}\r\n        \t\t});\r\n        \t}\r\n        },\r\n        //游戏圈按钮是否显示\r\n        ShowClubButton:function(flag = false)\r\n        {\r\n        \tif(this.platform == \"wx\" && this.gameClubBtn != null)\r\n        \t{\r\n        \t\tif(flag == true)\r\n        \t\t\tthis.gameClubBtn.show();\r\n        \t\telse\r\n        \t\t\tthis.gameClubBtn.hide();\r\n        \t}\r\n        },\r\n\r\n        //创建意见反馈\r\n        CreateFeedBackButton:function(){\r\n        \tif(this.platform == \"wx\")\r\n        \t{\r\n        \t\tvar winSize = cc.view.getVisibleSize();\r\n        \t\tvar leftRatio = 68 / winSize.width;\r\n        \t\tvar topRatio = 275 / winSize.height;\r\n        \t\tvar sysInfo = wx.getSystemInfoSync();\r\n        \t\tthis.lPos = sysInfo.windowWidth * leftRatio;\r\n        \t\tthis.tPos = sysInfo.windowHeight * topRatio;\r\n        \t\tvar self = this;\r\n\t\t        cc.loader.loadRes(\"/share.png\",function(err, texture){\r\n\t\t            self.feedBackBtn = wx.createFeedbackButton({\r\n\t        \t\t\ttype:\"image\",\r\n\t        \t\t\timage:texture,\r\n\t        \t\t\tstyle:{\r\n\t        \t\t\t\tleft:self.lPos - 20,\r\n\t        \t\t\t\ttop:self.tPos - 20,\r\n\t        \t\t\t\twidth: 45,\r\n\t        \t\t\t\theight: 45,\r\n\t        \t\t\t}\r\n\t        \t\t});\r\n\t\t        });\r\n        \t}\r\n        },\r\n        //意见反馈按钮显示和隐藏\r\n        ShowFeedbackBtn:function(flag = false)\r\n        {\r\n        \tif(this.platform == \"wx\" && this.feedBackBtn != null)\r\n        \t{\r\n        \t\tif(flag == true)\r\n        \t\t\tthis.feedBackBtn.show();\r\n        \t\telse\r\n        \t\t\tthis.feedBackBtn.hide();\r\n        \t}\r\n        },\r\n\r\n        //客服入口\r\n        OpenServiceConversation:function(){\r\n\t    \tif(this.platform == \"wx\")\r\n\t    \t{\r\n\t    \t\twx.openCustomerServiceConversation({\r\n\t    \t\t\tsessionFrom:'',\r\n\t    \t\t\tshowMessageCard:true,\r\n\t    \t\t});\r\n\t    \t}\r\n\t    \telse if(this.platform == \"tt\")\r\n\t    \t{\r\n\t    \t\t\r\n\t    \t}\r\n\t    },\r\n\r\n        //右上角的转发按钮\r\n        ShareTopNav:function(){\r\n        \tvar index = Math.floor(Math.random()*8);\r\n\t        let info = cc.Mgr.ShareInfos.getShareInfos(index);\r\n\t        if(this.platform == \"wx\")\r\n\t        {\r\n\t            wx.showShareMenu({withShareTicket:true});\r\n\t            wx.onShareAppMessage(function () {\r\n\t                return {\r\n\t                  title: info.text,\r\n\t                  //imageUrlId: '',\r\n\t                  imageUrl: info.url,\r\n\t                }\r\n\t            })\r\n\t        }\r\n\t        else if(this.platform == \"tt\")\r\n\t        {\r\n\t            tt.showShareMenu(false);\r\n\t            tt.onShareAppMessage(function () {\r\n\t                return {\r\n\t                  title: info.text,\r\n\t                  //imageUrlId: 'Ik14RZj7SV2BtigrtE3d1g',\r\n\t                  imageUrl: '',\r\n\t                }\r\n\t            })\r\n\t        }\r\n\t        else if(this.platform == \"baidu\")\r\n\t        {\r\n\t            swan.showShareMenu(false);\r\n\t            swan.onShareAppMessage(function () {\r\n\t                return {\r\n\t                  title: info.text,\r\n\t                  //imageUrlId: 'Ik14RZj7SV2BtigrtE3d1g',\r\n\t                  imageUrl: info.url\r\n\t                }\r\n\t            })\r\n\t        }\r\n        },\r\n\r\n        //转发一段文本\r\n        ShareToFriendTxt:function(str){\r\n        \tconsole.log(\"点击了分享啊\");\r\n        \tvar info = cc.Mgr.ShareInfos.getShareInfos(1);\r\n        \tif(this.platform == \"wx\")\r\n\t        {\r\n\t            wx.shareAppMessage({\r\n\t                title: str,\r\n\t                imageUrl: info.url,\r\n\t            })\r\n\t        }\r\n\t        else if(this.platform == \"tt\")\r\n\t        {\r\n\t            tt.shareAppMessage({\r\n\t                title: str,\r\n\t                imageUrl: info.url,\r\n\t            })\r\n\t        }\r\n\t        else if(this.platform == \"baidu\")\r\n\t        {\r\n\t            swan.shareAppMessage({\r\n\t                title: str,\r\n\t                imageUrl: info.url,\r\n\t            })\r\n\t        }\r\n        },\r\n\r\n        //自定义转发\r\n        ShareToFriend:function(index){\r\n        \tconsole.log(\"点击了分享啊\");\r\n        \tvar info = cc.Mgr.ShareInfos.getShareInfos(index);\r\n\t        if(this.platform == \"wx\")\r\n\t        {\r\n\t            wx.shareAppMessage({\r\n\t                title: info.text,\r\n\t                imageUrl: info.url,\r\n\t            })\r\n\t        }\r\n\t        else if(this.platform == \"tt\")\r\n\t        {\r\n\t            tt.shareAppMessage({\r\n\t                title: info.text,\r\n\t                imageUrl: info.url\r\n\t            })\r\n\t        }\r\n\t        else if(this.platform == \"baidu\")\r\n\t        {\r\n\t            swan.shareAppMessage({\r\n\t                title: info.text,\r\n\t                imageUrl: info.url\r\n\t            })\r\n\t        }\r\n        },\r\n \t\t//显示平台的小弹窗 回调用\r\n        showToast:function(text)\r\n\t    {\r\n\t        cc.log(text);\r\n\t        if(this.platform == \"wx\")\r\n\t        {\r\n\t            wx.showToast({\r\n\t                title: text,\r\n\t                icon: 'none',\r\n\t                duration: 2000\r\n\t            })\r\n\t        }\r\n\t        else if(this.platform == \"tt\")\r\n\t        {\r\n\t            tt.showToast({\r\n\t                title: text,\r\n\t                icon: 'none',\r\n\t                duration: 2000\r\n\t            })\r\n\t        }\r\n\t        else if(this.platform == \"baidu\")\r\n\t        {\r\n\t            swan.showToast({\r\n\t                title: text,\r\n\t                icon: 'none',\r\n\t                duration: 2000\r\n\t            })\r\n\t        }  \r\n\t    },\r\n\r\n\t    //打开客服对话\r\n\t    OpenServiceConversation:function(){\r\n\t    \tif(this.platform == \"wx\")\r\n\t    \t{\r\n\t    \t\twx.openCustomerServiceConversation({\r\n\t    \t\t\tsessionFrom:'',\r\n\t    \t\t\tshowMessageCard:true,\r\n\t    \t\t});\r\n\t    \t}\r\n\t    \telse if(this.platform == \"baidu\")\r\n\t    \t{\r\n\t    \t\tswan.openCustomerServiceConversation({\r\n\r\n\t    \t\t});\r\n\t    \t}\r\n\t    },\r\n\r\n\t    //微信开放数据存储 score 代表当前要保存的东西\r\n\t    setUserCloudStorage:function(socre) \r\n\t    {\r\n\t        cc.log(\"setUserCloudStorage socre = \" + socre);\r\n\t        if(this.platform == \"wx\")\r\n\t        {\r\n\t            var kvData={};\r\n\t            kvData.wxgame={};\r\n\t            kvData.wxgame.score = socre;\r\n\t            kvData.wxgame.update_time =  new Date().getTime();\r\n\t            console.log(JSON.stringify(kvData));\r\n\r\n\t            var kvDataList = new Array();\r\n\t            kvDataList.push({key: \"\bxmbScore\", value: JSON.stringify(kvData)});\r\n\t            wx.setUserCloudStorage({\r\n\t\t            KVDataList: kvDataList,\r\n\t\t            success: res => {\r\n\t\t                console.log(\"success:\" + JSON.stringify(res))\r\n\t\t            },\r\n\t\t            fail: res => {\r\n\t\t                console.log(\"fail : \" + res);\r\n\t\t            }\r\n\t            });\r\n\t        }\r\n\t        else if(this.platform == \"baidu\")\r\n\t        {\r\n\t        \tvar kvData={};\r\n\t            kvData.wxgame={};\r\n\t            kvData.wxgame.score = socre;\r\n\t            kvData.wxgame.update_time =  new Date().getTime();\r\n\t            console.log(JSON.stringify(kvData));\r\n\r\n\t            var kvDataList = new Array();\r\n\t            kvDataList.push({key: \"\bxmbScore\", value: JSON.stringify(kvData)});\r\n\r\n\t        \tswan.setUserCloudStorage({\r\n\t\t\t\t\tKVDataList: kvDataList,\r\n\t\t\t\t\tsuccess: res => console.log(\"success \"+res),\r\n\t\t\t\t\tfail: res => console.log(\"fail \"+res),\r\n\t\t\t\t\tcomplete: res => console.log(\"complete \"+res)\r\n\t\t\t\t});\r\n\t        }\r\n\t    },\r\n\r\n\t    //是否支持排行功能\r\n\t    IsSupportRank:function()\r\n\t    {\r\n\t        if(this.platform == \"wx\" || this.platform == \"baidu\")\r\n\t            return true;\r\n\r\n\t        return false;\r\n\t    },\r\n\r\n\t    //显示子域\r\n\t    showSubContentView:function()\r\n\t    {\r\n\t        if(this.platform == \"wx\" || this.platform == \"baidu\" )\r\n\t        {\r\n\t\t        var param = {};\r\n\t\t        param.platform = this.platform;\r\n\t\t        param.flag = true;\r\n\t\t        cc.director.GlobalEvent.emit(cc.Mgr.Event.ShowRank, param);\r\n\t        }\r\n\t    },\r\n\r\n\t    //隐藏子域\r\n\t    hideSubContentView:function()\r\n\t    {\r\n\t        if(this.platform == \"wx\" || this.platform == \"baidu\" )\r\n\t        {\r\n\t            var param = {};\r\n\t\t        param.flag = false;\r\n\t\t        param.platform = this.platform;\r\n\t\t        cc.director.GlobalEvent.emit(cc.Mgr.Event.ShowRank, param);\r\n\t        }\r\n\t    },\r\n\r\n\t    //向子域发送信息\r\n\t    SendMessageToSubView:function(code,curScore=0)\r\n\t    {\r\n\t        var msg={};\r\n\t        msg.code = code;\r\n\t        msg.curScore = curScore;\r\n\t        if(this.platform == \"wx\")\r\n\t        {\r\n\t            wx.getOpenDataContext().postMessage({\r\n\t                message: msg\r\n\t            });\r\n\t        }\r\n\t        else if(this.platform == \"baidu\")\r\n\t        {\r\n\t        \tswan.getOpenDataContext().postMessage({\r\n\t\t\t\t    message: msg\r\n\t\t\t\t});\r\n\t        }\r\n\t    },\r\n\r\n\t    //是否支持录屏\r\n\t    IsSupportRecordScreen:function()\r\n\t    {\r\n\t        if(this.platform == \"tt\")\r\n\t            return true;\r\n\t        else if(this.platform == \"baidu\")//百度有基础库版本限制\r\n\t        {\r\n\t        \tif(this.CompareSdkVesrion(swan.getSystemInfoSync().SDKVersion, \"1.4.1\"))\r\n\t        \t\treturn true;\r\n\t        \telse\r\n\t            \treturn false;\r\n\t        }\r\n\r\n\t        return false;\r\n\t    },\r\n\r\n\t    CompareSdkVesrion:function(sdkV, needV){\r\n\t    \tvar out1 = sdkV.split('.');\r\n\t    \tvar out2 = needV.split('.');\r\n\t    \tfor (var i = 0; i < out1.length; i++) {\r\n\t    \t\tif(parseInt(out1[i]) < parseInt(out2[i]))\r\n\t    \t\t{\r\n\t    \t\t\treturn 0;\r\n\t    \t\t}\r\n\t    \t\telse if(parseInt(out1[i]) > parseInt(out2[i]))\r\n\t    \t\t{\r\n\t    \t\t\treturn 1;\r\n\t    \t\t}\r\n\t    \t}\r\n\t    \treturn 1;\r\n\t    },\r\n\r\n\t    //开始录屏\r\n\t    StartRecordScreen:function()\r\n\t    {\r\n\t        var self = this;\r\n\t        this.videoPath = \"\";\r\n\t        if(this.platform == \"tt\")\r\n\t        {\r\n\t            if(this.recorderManager == null)\r\n\t            {\r\n\t                this.recorderManager = tt.getGameRecorderManager();\r\n\t                \r\n\t                this.recorderManager.onStart(res =>{\r\n\t                    console.log(\"录制开始了: \"+res);\r\n\t                });\r\n\r\n\t                this.recorderManager.onStop(res =>{\r\n\t                    console.log(\"录制结束了: \"+res.videoPath);\r\n\t                    self.videoPath = res.videoPath;\r\n\t                    self.ShareRecordScreen();\r\n\t                });\r\n\t                \r\n\t                this.recorderManager.onPause(() =>{\r\n\t                    console.log(\"录制暂停了\");\r\n\t                });\r\n\t                \r\n\t                this.recorderManager.onResume(() =>{\r\n\t                    console.log(\"录制恢复了\");\r\n\t                });\r\n\r\n\t                this.recorderManager.onError(errMsg =>{\r\n\t                    console.log(\"录制出错了:\" + errMsg);\r\n\t                });\r\n\t            }\r\n\r\n\t            this.recorderManager.start({\r\n\t                duration: 30,//基础录制30秒\r\n\t            });\r\n\t        }\r\n\t        else if(this.platform == \"baidu\")\r\n\t        {\r\n\t            if(this.recorderManager == null)\r\n\t            {\r\n\t                this.recorderManager = swan.getVideoRecorderManager();\r\n\t                \r\n\t                this.recorderManager.onStart(res =>{\r\n\t                    console.log(\"录制开始了: \"+res);\r\n\t                });\r\n\r\n\t                this.recorderManager.onStop(res =>{\r\n\t                    console.log(\"录制结束了: \"+res.videoPath);\r\n\t                    self.videoPath = res.videoPath;\r\n\t                });\r\n\t                \r\n\t                this.recorderManager.onPause(() =>{\r\n\t                    console.log(\"录制暂停了\");\r\n\t                });\r\n\t                \r\n\t                this.recorderManager.onResume(() =>{\r\n\t                    console.log(\"录制恢复了\");\r\n\t                });\r\n\r\n\t                this.recorderManager.onError(errMsg =>{\r\n\t                    console.log(\"录制出错了:\" + errMsg);\r\n\t                });\r\n\t            }\r\n\t            this.recorderManager.start({\r\n\t                duration: 30,\r\n\t                microphoneEnabled: true,//是否支持麦克风\r\n\t            });\r\n\t        }\r\n\t    },\r\n\t    //停止录屏\r\n\t    StopRecordScreen:function()\r\n\t    {\r\n\t        if(this.platform == \"tt\")\r\n\t        {\r\n\t            if(this.recorderManager == null)\r\n\t            {\r\n\t                return;\r\n\t            }\r\n\t            console.log(\"停止录制\");\r\n\t            this.recorderManager.stop();\r\n\t        }\r\n\r\n\t        else if(this.platform == \"baidu\")\r\n\t        {\r\n\t            if(this.recorderManager == null)\r\n\t            {\r\n\t                return;\r\n\t            }\r\n\t            console.log(\"停止录制\");\r\n\t            this.recorderManager.stop();\r\n\t        }\r\n\t    },\r\n\t    //分享录制的视频\r\n\t    ShareRecordScreen:function()\r\n\t    {\r\n\t        if(this.platform == \"tt\")\r\n\t        {\r\n\t            if(this.recorderManager == null || this.videoPath == \"\")\r\n\t            {\r\n\t                return;\r\n\t            }\r\n\t            console.log(\"分享录制的视频\");\r\n\t            tt.shareVideo({\r\n\t                videoPath: `${this.videoPath}`,\r\n\t                success () {\r\n\t                console.log(\"分享成功！\");\r\n\t                },\r\n\t                fail (e) {\r\n\t                console.log(\"分享失败！\"  + e);\r\n\t                }\r\n\t            });\r\n\t        }\r\n\t        else if(this.platform == \"baidu\")\r\n\t        {\r\n\t            if(this.recorderManager == null || this.videoPath == null)\r\n\t            {\r\n\t                return;\r\n\t            }\r\n\r\n\t            console.log(\"分享录制的视频\");\r\n\t            swan.shareVideo({\r\n\t                videoPath: `${this.videoPath}`,\r\n\t                success () {\r\n\t                console.log(\"分享成功！\");\r\n\t                },\r\n\t                fail (e) {\r\n\t                console.log(\"分享失败！\" + e);\r\n\t                }\r\n\t            });\r\n\t        }\r\n\t    },\r\n\r\n\t    //跳转到其他小程序  要到对应 app.json 或者 game.json 中添加列表\r\n\t    JumpToOtherApp:function(appId){\r\n\t    \tif(this.platform == \"wx\")\r\n\t    \t{\r\n\t    \t\twx.navigateToMiniProgram({\r\n\t\t\t\t\tappId: appId,\r\n\t\t\t\t\tenvVersion:'release',\r\n\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\tconsole.log(\"成功打开了其他小程序\");\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t    \t}\r\n\t    \telse if(this.platform == \"baidu\")\r\n\t    \t{\r\n\t    \t\tswan.navigateToMiniProgram({\r\n\t\t\t\t\tappKey: appId,\r\n\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\tconsole.log(\"成功打开了其他小程序\");\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t    \t}\r\n\t    \telse if(this.platform == \"tt\")\r\n\t    \t{\r\n\t    \t\ttt.navigateToMiniProgram({\r\n\t\t\t\t\tappId: appId,\r\n\t\t\t\t\tenvVersion:'release',\r\n\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\tconsole.log(\"成功打开了其他小程序\");\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t    \t}\r\n\t    },\r\n\r\n\t    //震屏功能  长震动还是短震动\r\n\t    QuakeScreen:function(long = true){\r\n\t    \tif(this.platform != \"pc\")\r\n\t    \t{\r\n\t    \t\tif(long == true)\r\n\t    \t\t{\r\n\t    \t\t\tif(this.platform == \"tt\")\r\n\t\t    \t\t{\r\n\t\t    \t\t\ttt.vibrateLong({\r\n\t\t\t\t\t\t    success (res) {\r\n\t\t\t\t\t\t        console.log(`${res}`);\r\n\t\t\t\t\t\t    },\r\n\t\t\t\t\t\t    fail (res) {\r\n\t\t\t\t\t\t        console.log(`vibrateLong调用失败`);\r\n\t\t\t\t\t\t    }\r\n\t\t\t\t\t\t});\r\n\t\t    \t\t}\r\n\t\t    \t\telse if(this.platform == \"baidu\")\r\n\t\t    \t\t{\r\n\t\t    \t\t\tswan.vibrateLong({\r\n\t\t\t\t\t\t    success (res) {\r\n\t\t\t\t\t\t        console.log(`${res}`);\r\n\t\t\t\t\t\t    },\r\n\t\t\t\t\t\t    fail (res) {\r\n\t\t\t\t\t\t        console.log(`vibrateLong调用失败`);\r\n\t\t\t\t\t\t    }\r\n\t\t\t\t\t\t});\r\n\t\t    \t\t}\r\n\t\t    \t\telse if(this.platform == \"wx\")\r\n\t\t    \t\t{\r\n\t\t    \t\t\twx.vibrateLong({\r\n\t\t\t\t\t\t    success (res) {\r\n\t\t\t\t\t\t        console.log(`${res}`);\r\n\t\t\t\t\t\t    },\r\n\t\t\t\t\t\t    fail (res) {\r\n\t\t\t\t\t\t        console.log(`vibrateLong调用失败`);\r\n\t\t\t\t\t\t    }\r\n\t\t\t\t\t\t});\r\n\t\t    \t\t}\r\n\t    \t\t}\r\n\t    \t\telse\r\n\t    \t\t{\r\n\t    \t\t\tif(this.platform == \"tt\")\r\n\t\t    \t\t{\r\n\t\t    \t\t\ttt.vibrateShort({\r\n\t\t\t\t\t\t    success (res) {\r\n\t\t\t\t\t\t        console.log(`${res}`);\r\n\t\t\t\t\t\t    },\r\n\t\t\t\t\t\t    fail (res) {\r\n\t\t\t\t\t\t        console.log(`vibrateShort调用失败`);\r\n\t\t\t\t\t\t    }\r\n\t\t\t\t\t\t});\r\n\t\t    \t\t}\r\n\t\t    \t\telse if(this.platform == \"baidu\")\r\n\t\t    \t\t{\r\n\t\t    \t\t\tswan.vibrateShort({\r\n\t\t\t\t\t\t    success (res) {\r\n\t\t\t\t\t\t        console.log(`${res}`);\r\n\t\t\t\t\t\t    },\r\n\t\t\t\t\t\t    fail (res) {\r\n\t\t\t\t\t\t        console.log(`vibrateShort调用失败`);\r\n\t\t\t\t\t\t    }\r\n\t\t\t\t\t\t});\r\n\t\t    \t\t}\r\n\t\t    \t\telse if(this.platform == \"wx\")\r\n\t\t    \t\t{\r\n\t\t    \t\t\twx.vibrateShort({\r\n\t\t\t\t\t\t    success (res) {\r\n\t\t\t\t\t\t        console.log(`${res}`);\r\n\t\t\t\t\t\t    },\r\n\t\t\t\t\t\t    fail (res) {\r\n\t\t\t\t\t\t        console.log(`vibrateLong调用失败`);\r\n\t\t\t\t\t\t    }\r\n\t\t\t\t\t\t});\r\n\t\t    \t\t}\r\n\t    \t\t}\r\n\t    \t}\r\n\t    },\r\n\t},\r\n});\r\nmodule.exports = PlatformController;\r\n"]}